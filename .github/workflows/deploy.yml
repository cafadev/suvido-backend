on:
  push:
    branches:
      - main

name: ğŸš€ Deploy project on server
jobs:
  deploy-application:
    runs-on: self-hosted

    name: ğŸ‰ Deploying into server
    steps:
    - name: ğŸšš Get latest code
      uses: actions/checkout@v2

    - name: Build docker
      run: docker-compose up --build -d

    - name: Create user
      run: docker-compose run backend python manage.py createadminuser ${{ secrets.ADMIN_USER }}

